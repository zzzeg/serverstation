(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/tools/share"],{288:
/*!*************************************************************************************!*\
  !*** E:/yisheng_mingwo/serverMobile/trunk/main.js?{"page":"pages%2Ftools%2Fshare"} ***!
  \*************************************************************************************/
/*! no static exports found */function(t,e,n){"use strict";(function(t){n(/*! uni-pages */4);o(n(/*! vue */2));var e=o(n(/*! ./pages/tools/share.vue */289));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["createPage"])},289:
/*!******************************************************************!*\
  !*** E:/yisheng_mingwo/serverMobile/trunk/pages/tools/share.vue ***!
  \******************************************************************/
/*! no static exports found */function(t,e,n){"use strict";n.r(e);var o=n(/*! ./share.vue?vue&type=template&id=2cc2cfea& */290),i=n(/*! ./share.vue?vue&type=script&lang=js& */292);for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);n(/*! ./share.vue?vue&type=style&index=0&lang=css& */294);var s,l=n(/*! ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js */10),a=Object(l["default"])(i["default"],o["render"],o["staticRenderFns"],!1,null,null,null,!1,o["components"],s);a.options.__file="E:/yisheng_mingwo/serverMobile/trunk/pages/tools/share.vue",e["default"]=a.exports},290:
/*!*************************************************************************************************!*\
  !*** E:/yisheng_mingwo/serverMobile/trunk/pages/tools/share.vue?vue&type=template&id=2cc2cfea& ***!
  \*************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(t,e,n){"use strict";n.r(e);var o=n(/*! -!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./share.vue?vue&type=template&id=2cc2cfea& */291);n.d(e,"render",(function(){return o["render"]})),n.d(e,"staticRenderFns",(function(){return o["staticRenderFns"]})),n.d(e,"recyclableRender",(function(){return o["recyclableRender"]})),n.d(e,"components",(function(){return o["components"]}))},291:
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!E:/yisheng_mingwo/serverMobile/trunk/pages/tools/share.vue?vue&type=template&id=2cc2cfea& ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(t,e,n){"use strict";n.r(e),n.d(e,"render",(function(){return i})),n.d(e,"staticRenderFns",(function(){return s})),n.d(e,"recyclableRender",(function(){return r})),n.d(e,"components",(function(){return o}));var o={tkiQrcode:function(){return Promise.all(/*! import() | components/tki-qrcode/tki-qrcode */[n.e("common/vendor"),n.e("components/tki-qrcode/tki-qrcode")]).then(n.bind(null,/*! @/components/tki-qrcode/tki-qrcode.vue */320))}},i=function(){var t=this,e=t.$createElement;t._self._c},r=!1,s=[];i._withStripped=!0},292:
/*!*******************************************************************************************!*\
  !*** E:/yisheng_mingwo/serverMobile/trunk/pages/tools/share.vue?vue&type=script&lang=js& ***!
  \*******************************************************************************************/
/*! no static exports found */function(t,e,n){"use strict";n.r(e);var o=n(/*! -!./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./share.vue?vue&type=script&lang=js& */293),i=n.n(o);for(var r in o)"default"!==r&&function(t){n.d(e,t,(function(){return o[t]}))}(r);e["default"]=i.a},293:
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!E:/yisheng_mingwo/serverMobile/trunk/pages/tools/share.vue?vue&type=script&lang=js& ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=r(n(/*! ../../common/api.js */17)),i=(r(n(/*! ../../common/util.js */27)),r(n(/*! ../../common/request.js */18)));function r(t){return t&&t.__esModule?t:{default:t}}var s=function(){Promise.all(/*! require.ensure | components/tki-qrcode/tki-qrcode */[n.e("common/vendor"),n.e("components/tki-qrcode/tki-qrcode")]).then(function(){return resolve(n(/*! @/components/tki-qrcode/tki-qrcode.vue */320))}.bind(null,n)).catch(n.oe)},l={components:{tkiQrcode:s},data:function(){return{codeUrl:"",codepicUrl:"",saveUrl:null,tools:null}},onLoad:function(e){var n=this;this.tid=e.tid;var r={id:this.tid};o.default.findToolsById({data:r}).then((function(e){if(console.log(e),"OK"==e.status){n.tools=e.data,e.data.pics&&JSON.parse(e.data.pics)&&(n.tools.pics=JSON.parse(e.data.pics)[0].url);var o=n;console.log(o.tools.pics);var r=o.tools.pics.replace("http://coffer-cdn","https://coffer");r=r.replace("http://coffer","https://coffer"),t.downloadFile({url:r,success:function(e){if(200===e.statusCode){console.log("下载成功"),o.tools.pics=e.tempFilePath,console.log(o.tools.pics);var n=Date.parse(new Date),r=t.getStorageSync("userinfo");o.codeUrl=i.default.sharehost+"share?id="+o.tid+"&time="+n+"&communityId="+r.id}}}),t.setNavigationBarTitle({title:e.data.title})}}))},methods:{qrR:function(t){this.codepicUrl=t,console.log(t),this.toDrawCanvas()},clickCanvas:function(){this.saveUrl&&wx.previewImage({current:this.saveUrl,urls:[this.saveUrl]})},saveImage:function(){var e=this;t.canvasToTempFilePath({x:0,y:0,canvasId:"firstCanvas",success:function(n){t.authorize({scope:"scope.writePhotosAlbum",success:function(){t.saveImageToPhotosAlbum({filePath:n.tempFilePath,success:function(o){e.saveUrl=n.tempFilePath,wx.previewImage({current:n.tempFilePath,urls:[n.tempFilePath]}),t.showToast({title:"保存成功",icon:"none"})},fail:function(e){console.log(e),"saveImageToPhotosAlbum:fail auth deny"==e.errMsg&&(t.showToast({title:"保存失败，请授权保存到相册",icon:"none"}),setTimeout((function(){console.log("openSetting"),t.openSetting({success:function(t){console.log(t.authSetting)},fail:function(t){console.log(t)}})}),2e3))}})}})}})},toDrawCanvas:function(){var e=this,n=e.tools.title,o=e.tools.introduction,i=t.createCanvasContext("firstCanvas"),r=t.upx2px(630),s=t.upx2px(1100);i.setFillStyle("#FFFFFF"),i.fillRect(0,0,r,s);t.upx2px(311),t.upx2px(64),t.upx2px(48);var l=t.upx2px(32),a=t.upx2px(80);t.upx2px(232);i.setFillStyle("#434E5E"),i.setFontSize(l),i.textAlign="start";var c=0,u=a,f=1,d=0,p=10;if(o){for(var v=0;v<o.length;v++)if(d+=i.measureText(o[v]).width,d>r-20){if(3==f){i.fillText(o.substring(c,v-8)+"...",p,u),d=0,c=v,f++;break}i.fillText(o.substring(c,v),p,u),d=0,u+=20,c=v,f++}else v==o.length-1&&(i.fillText(o.substring(c,v+1),p,u),d=0);u+=20}console.log(e.tools.pics);var h=e.tools.pics,m=10,g=r-2*m,x=s/2-g/2-20;i.drawImage(h,m,x,g,g);var F=e.codepicUrl,b=t.upx2px(200),w=r-t.upx2px(215)-10,S=x+g+20;i.drawImage(F,w,S,b,b),i.setFillStyle("#434E5E");var T=t.upx2px(20);i.setFontSize(T),i.textAlign="start",i.fillText("扫一扫查看详情",w+20,S+b+10),i.setFillStyle("#16202E");var y=t.upx2px(34);i.setFontSize(y),i.textAlign="start",i.fillText(n,10,S+10),i.draw()}}};e.default=l}).call(this,n(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["default"])},294:
/*!***************************************************************************************************!*\
  !*** E:/yisheng_mingwo/serverMobile/trunk/pages/tools/share.vue?vue&type=style&index=0&lang=css& ***!
  \***************************************************************************************************/
/*! no static exports found */function(t,e,n){"use strict";n.r(e);var o=n(/*! -!./node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!./node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--6-oneOf-1-2!./node_modules/postcss-loader/src??ref--6-oneOf-1-3!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./share.vue?vue&type=style&index=0&lang=css& */295),i=n.n(o);for(var r in o)"default"!==r&&function(t){n.d(e,t,(function(){return o[t]}))}(r);e["default"]=i.a},295:
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!./node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--6-oneOf-1-2!./node_modules/postcss-loader/src??ref--6-oneOf-1-3!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!E:/yisheng_mingwo/serverMobile/trunk/pages/tools/share.vue?vue&type=style&index=0&lang=css& ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(t,e,n){}},[[288,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/tools/share.js.map